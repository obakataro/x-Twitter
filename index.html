<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âº∑Âà∂„ÄåX„ÄçË®ÇÊ≠£„Ç∑„Çπ„ÉÜ„É†</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', sans-serif;
            background-color: #f5f8fa;
            color: #333;
            text-align: center;
            padding: 50px;
            overflow: hidden;
        }

        h1 {
            color: #1da1f2; /* „ÅÇ„Åà„Å¶Êóß„Ç´„É©„Éº */
        }

        #controls {
            margin: 20px 0;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            background-color: #1da1f2;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }

        button.recording {
            background-color: #e0245e;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        #output {
            margin-top: 30px;
            font-size: 24px;
            min-height: 100px;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: inline-block;
            width: 80%;
            max-width: 600px;
            text-align: left;
        }

        /* Ë¨é„ÅÆ„Ç´„ÉÉ„Éà„Ç§„É≥ÊºîÂá∫Áî®CSS */
        #cut-in {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.1s;
        }

        #cut-in.active {
            opacity: 1;
            pointer-events: auto;
        }

        .cut-in-text {
            color: #ff0040;
            font-size: 15vw;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 10px;
            transform: skewX(-15deg) scale(0);
            text-shadow: 4px 4px 0px #fff, -4px -4px 0px #fff;
        }

        #cut-in.active .cut-in-text {
            animation: slashIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes slashIn {
            0% { transform: translateX(100vw) skewX(-30deg) scale(0.5); opacity: 0; }
            40% { transform: translateX(0) skewX(-15deg) scale(1.2); opacity: 1; }
            60% { transform: translateX(0) skewX(-15deg) scale(1); opacity: 1; }
            100% { transform: translateX(-100vw) skewX(0deg) scale(0.5); opacity: 0; }
        }
    </style>
</head>
<body>

    <h1>üéôÔ∏è Èü≥Â£∞Áõ£Ë¶ñ„Ç∑„Çπ„ÉÜ„É†Á®ºÂÉç‰∏≠</h1>
    <p>„ÄåTwitter„Äç„ÇÑ„Äå„ÉÑ„Ç§„Éº„Éà„Äç„Å®Ë®Ä„Å£„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>

    <div id="controls">
        <button id="start-btn">Áõ£Ë¶ñ„Çí„Çπ„Çø„Éº„Éà</button>
    </div>

    <div id="output">„Åì„Åì„Å´Áô∫Ë®Ä„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô...</div>

    <div id="cut-in">
        <div class="cut-in-text" id="cut-in-message">ùïè / „Éù„Çπ„Éà</div>
    </div>

    <script>
        const startBtn = document.getElementById('start-btn');
        const output = document.getElementById('output');
        const cutIn = document.getElementById('cut-in');
        const cutInMessage = document.getElementById('cut-in-message');

        // Èü≥Â£∞Ë™çË≠ò„ÅÆ„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó (ChromeÂØæÂøú)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        
        if (!SpeechRecognition) {
            output.innerHTML = "„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈü≥Â£∞Ë™çË≠ò„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇChrome„Çí„Åä‰Ωø„ÅÑ„Åè„Å†„Åï„ÅÑ„ÄÇ";
        } else {
            const recognition = new SpeechRecognition();
            recognition.lang = 'ja-JP';
            recognition.continuous = true;
            recognition.interimResults = true; // ÈÄî‰∏≠ÁµåÈÅé„ÇÇÂèñÂæó

            let isRecording = false;

            startBtn.addEventListener('click', () => {
                if (!isRecording) {
                    recognition.start();
                    startBtn.textContent = "Áõ£Ë¶ñ‰∏≠... („Çø„ÉÉ„Éó„ÅßÂÅúÊ≠¢)";
                    startBtn.classList.add("recording");
                    isRecording = true;
                } else {
                    recognition.stop();
                    startBtn.textContent = "Áõ£Ë¶ñ„Çí„Çπ„Çø„Éº„Éà";
                    startBtn.classList.remove("recording");
                    isRecording = false;
                }
            });

            recognition.onresult = (event) => {
                let finalTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; i++) {
                    let transcript = event.results[i][0].transcript;

                    // NG„ÉØ„Éº„ÉâÊ§úÁü•ÔºÅ
                    if (transcript.match(/„ÉÑ„Ç§„ÉÉ„Çø„Éº|Twitter|„ÉÑ„Ç§„Éº„Éà|tweet/i)) {
                        
                        // „Ç´„ÉÉ„Éà„Ç§„É≥Áô∫ÂãïÔºÅ
                        triggerCutIn();

                        // „ÉÜ„Ç≠„Çπ„Éà„ÇíÂº∑Âà∂ÁΩÆÊèõ
                        transcript = transcript
                            .replace(/„ÉÑ„Ç§„ÉÉ„Çø„Éº|Twitter/gi, " <strong style='color:black; font-size:1.5em;'>ùïè</strong> ")
                            .replace(/„ÉÑ„Ç§„Éº„Éà|tweet/gi, " <strong style='color:black; font-size:1.5em;'>„Éù„Çπ„Éà</strong> ");
                    }

                    if (event.results[i].isFinal) {
                        finalTranscript += transcript + '<br>';
                    }
                }

                if (finalTranscript !== '') {
                    output.innerHTML = finalTranscript;
                }
            };

            // Èå≤Èü≥„ÅåÂãùÊâã„Å´Ê≠¢„Åæ„Å£„Åü„ÇâÂÜçÈñã„Åô„ÇãÔºà„Åä„Åæ„ÅëÔºâ
            recognition.onend = () => {
                if (isRecording) {
                    recognition.start();
                }
            };
        }

        // „Ç´„ÉÉ„Éà„Ç§„É≥ÊºîÂá∫„ÇíÂà∂Âæ°„Åô„ÇãÈñ¢Êï∞
        function triggerCutIn() {
            // „Åô„Åß„Å´„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥‰∏≠„ÅÆÂ†¥Âêà„ÅØ„É™„Çª„ÉÉ„Éà
            cutIn.classList.remove('active');
            
            // Â∞ë„Åó„Å†„ÅëÈÅÖÂª∂„Åï„Åõ„Å¶„ÇØ„É©„Çπ„Çí‰ªò‰∏éÔºà„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇíÁ¢∫ÂÆü„Å´ÂÜçÁô∫ÁÅ´„Åï„Åõ„Çã„Åü„ÇÅÔºâ
            setTimeout(() => {
                cutIn.classList.add('active');
                
                // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÅåÁµÇ„Çè„ÇãÈ†ÉÔºà1ÁßíÂæåÔºâ„Å´ÈùûË°®Á§∫„Å´Êàª„Åô
                setTimeout(() => {
                    cutIn.classList.remove('active');
                }, 1000);
            }, 50);
        }
    </script>
</body>
</html>
